(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"9i+i":function(t,e,s){"use strict";s.r(e),s.d(e,"StatisticsModule",(function(){return f}));var i=s("ofXK"),o=s("tyNb"),n=s("XNiG"),r=s("1G5W"),c=s("vkgz"),a=s("pHS2"),b=s("wBxZ"),d=s("fXoL"),l=s("suKW"),g=s("HcYF");function u(t,e){if(1&t&&(d.Ob(0,"div",9),d.Jb(1,"progress",10),d.Ob(2,"span",11),d.tc(3),d.Nb(),d.Nb()),2&t){const t=d.Xb();d.xb(1),d.dc("value",t.totalProgress.progress),d.xb(2),d.wc("Total Loot Progress (This Phase): ",t.totalProgress.rankingsReceived," / ",t.totalProgress.rankings,"")}}function m(t,e){if(1&t&&(d.Ob(0,"div",9),d.Jb(1,"progress",12),d.Ob(2,"span",11),d.tc(3),d.Nb(),d.Nb()),2&t){const t=d.Xb();d.xb(1),d.dc("value",t.totalProgressTop10.progress),d.xb(2),d.wc("Top 10 Rankings Progress (This Phase): ",t.totalProgressTop10.rankingsReceived," / ",t.totalProgressTop10.rankings,"")}}function p(t,e){if(1&t&&(d.Ob(0,"li"),d.tc(1),d.Nb()),2&t){const t=e.$implicit;d.xb(1),d.wc(" ",t.ranking.loot.name," (",t.sum,") ")}}function v(t,e){if(1&t&&(d.Ob(0,"div",13),d.Ob(1,"div"),d.Ob(2,"p",4),d.tc(3,"Most Popular Items"),d.Nb(),d.Ob(4,"ol"),d.rc(5,p,2,2,"li",14),d.Nb(),d.Nb(),d.Nb()),2&t){const t=d.Xb();d.xb(5),d.dc("ngForOf",t.mostPopularItems)}}function h(t,e){if(1&t&&(d.Ob(0,"li"),d.tc(1),d.Nb()),2&t){const t=e.$implicit;d.xb(1),d.wc(" ",t.item.name," (",t.count,") ")}}function O(t,e){if(1&t&&(d.Ob(0,"div",13),d.Ob(1,"div"),d.Ob(2,"p",4),d.tc(3,"Most Commonly Looted Items"),d.Nb(),d.Ob(4,"ol"),d.rc(5,h,2,2,"li",14),d.Nb(),d.Nb(),d.Nb()),2&t){const t=d.Xb();d.xb(5),d.dc("ngForOf",t.mostCommonItems)}}const k=[{path:"",component:(()=>{class t{constructor(t,e){this.lootListFacade=t,this.statisticsService=e,this.destroyed$=new n.a,this.raiderCount=0,this.lootReceived=0,this.totalRanked=0,this.avgAttendance=0,this.totalReceivedThisPhase=0,this.totalProgress=null,this.totalProgressTop10=null,this.mostPopularItems=null,this.mostCommonItems=null}ngOnInit(){this.lootListFacade.raiders$.pipe(Object(r.a)(this.destroyed$),Object(c.a)(t=>{this.raiderCount=t.length,this.lootReceived=t.reduce((t,e)=>t+e.receivedLoot.length,0),this.totalRanked=t.reduce((t,e)=>t+e.rankings.length,0),this.avgAttendance=t.reduce((t,e)=>t+e.attendancePoints,0)/this.raiderCount;const e=t.map(t=>this.statisticsService.getRaiderListProgress(t));this.totalProgress=e.reduce((t,e)=>(t.rankings=t.rankings+e.rankings,t.rankingsReceived=t.rankingsReceived+e.rankingsReceived,t),{progress:0,rankings:0,rankingsReceived:0}),this.totalProgress.progress=this.totalProgress.rankingsReceived/this.totalProgress.rankings*100;const s=t.map(t=>this.statisticsService.getRaiderListProgress(t,10));this.totalProgressTop10=s.reduce((t,e)=>(t.rankings=t.rankings+e.rankings,t.rankingsReceived=t.rankingsReceived+e.rankingsReceived,t),{progress:0,rankings:0,rankingsReceived:0}),this.totalProgressTop10.progress=this.totalProgressTop10.rankingsReceived/this.totalProgressTop10.rankings*100;const i=t.reduce((t,e)=>[...t,...e.rankings],[]),o=Object(a.a)(i,"loot.itemId"),n=Object.keys(o).filter(t=>"undefined"!=t).map(t=>({itemId:t,sum:o[t].reduce((t,e)=>t+e.ranking,0)})).sort((t,e)=>e.sum-t.sum),r=Object(b.a)(n,10);this.mostPopularItems=r.map(t=>({ranking:o[t.itemId][0],sum:t.sum}));const c=t.reduce((t,e)=>[...t,...e.receivedLoot],[]),d=Object(a.a)(c,"itemId"),l=Object.keys(d).filter(t=>"undefined"!=t).map(t=>({itemId:t,count:d[t].length})).sort((t,e)=>e.count-t.count),g=Object(b.a)(l,10);this.mostCommonItems=g.map(t=>({item:d[t.itemId][0],count:t.count}))})).subscribe()}ngOnDestroy(){this.destroyed$.next()}}return t.\u0275fac=function(e){return new(e||t)(d.Ib(l.a),d.Ib(g.a))},t.\u0275cmp=d.Cb({type:t,selectors:[["app-statistics"]],decls:35,vars:8,consts:[[1,"columns","is-multiline"],[1,"column","is-12"],[1,"level","is-mobile"],[1,"level-item","has-text-centered","box"],[1,"heading"],[1,"title"],[1,"box","has-background-dark"],["class","has-text-centered",4,"ngIf"],["class","level-item box",4,"ngIf"],[1,"has-text-centered"],["max","100",1,"progress","is-info","mb-0",3,"value"],[1,"has-text-centered","is-size-5","is-grey-light"],["max","100",1,"progress","is-success","mb-0",3,"value"],[1,"level-item","box"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(d.Ob(0,"div",0),d.Ob(1,"div",1),d.Ob(2,"nav",2),d.Ob(3,"div",3),d.Ob(4,"div"),d.Ob(5,"p",4),d.tc(6,"Raiders"),d.Nb(),d.Ob(7,"p",5),d.tc(8),d.Nb(),d.Nb(),d.Nb(),d.Ob(9,"div",3),d.Ob(10,"div"),d.Ob(11,"p",4),d.tc(12,"Total Loot Received (All Time)"),d.Nb(),d.Ob(13,"p",5),d.tc(14),d.Nb(),d.Nb(),d.Nb(),d.Ob(15,"div",3),d.Ob(16,"div"),d.Ob(17,"p",4),d.tc(18,"Total Rankings (This Phase)"),d.Nb(),d.Ob(19,"p",5),d.tc(20),d.Nb(),d.Nb(),d.Nb(),d.Ob(21,"div",3),d.Ob(22,"div"),d.Ob(23,"p",4),d.tc(24,"Average Attendance Points"),d.Nb(),d.Ob(25,"p",5),d.tc(26),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Ob(27,"div",1),d.Ob(28,"div",6),d.rc(29,u,4,3,"div",7),d.rc(30,m,4,3,"div",7),d.Nb(),d.Nb(),d.Ob(31,"div",1),d.Ob(32,"nav",2),d.rc(33,v,6,1,"div",8),d.rc(34,O,6,1,"div",8),d.Nb(),d.Nb(),d.Nb()),2&t&&(d.xb(8),d.uc(e.raiderCount),d.xb(6),d.uc(e.lootReceived),d.xb(6),d.uc(e.totalRanked),d.xb(6),d.uc(e.avgAttendance.toFixed(2)),d.xb(3),d.dc("ngIf",e.totalProgress),d.xb(1),d.dc("ngIf",e.totalProgressTop10),d.xb(3),d.dc("ngIf",e.mostPopularItems),d.xb(1),d.dc("ngIf",e.mostCommonItems))},directives:[i.l,i.k],styles:[""]}),t})()}];let N=(()=>{class t{}return t.\u0275mod=d.Gb({type:t}),t.\u0275inj=d.Fb({factory:function(e){return new(e||t)},imports:[[o.d.forChild(k)],o.d]}),t})(),f=(()=>{class t{}return t.\u0275mod=d.Gb({type:t}),t.\u0275inj=d.Fb({factory:function(e){return new(e||t)},imports:[[i.c,N]]}),t})()}}]);